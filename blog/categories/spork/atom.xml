<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Category: spork | Welcome to the blog of blueplanet]]></title>
  <link href="http://blueplanet.github.com/blog/categories/spork/atom.xml" rel="self"/>
  <link href="http://blueplanet.github.com/"/>
  <updated>2012-10-16T22:57:23+09:00</updated>
  <id>http://blueplanet.github.com/</id>
  <author>
    <name><![CDATA[blueplanet]]></name>
    
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[sportでRSpec on Railsのテストを高速化]]></title>
    <link href="http://blueplanet.github.com/blog/2012/03/29/spork-rails/"/>
    <updated>2012-03-29T23:08:00+09:00</updated>
    <id>http://blueplanet.github.com/blog/2012/03/29/spork-rails</id>
    <content type="html"><![CDATA[<p>　RSpecを勉強中。RSpecのテストを実行する時、何となく遅い気がしちゃいます。高速化する方法がないかと調べると、<a href="https://github.com/sporkrb/spork">github spork</a>が出ました。</p>

<h3>まずは導入前後の比較、爆速ですね</h3>

<table>
<thead>
<tr>
<th></th>
<th>     </th>
<th> user  </th>
<th> system </th>
<th> cpu </th>
<th> total  </th>
</tr>
</thead>
<tbody>
<tr>
<td></td>
<td>導入前</td>
<td> 4.32s </td>
<td> 0.54s  </td>
<td> 99% </td>
<td> 4.898s |</td>
</tr>
<tr>
<td></td>
<td>導入後</td>
<td> 0.19s </td>
<td> 0.05s  </td>
<td> 31% </td>
<td> 0.788s |</td>
</tr>
</tbody>
</table>


<h3>使い方もシンプル</h3>

<ol>
<li><code>Gemfile</code>に<code>gem spork</code>を追加</li>
<li><code>spork --bootstrap</code>を実行して、必要なファイルを生成する</li>
<li><code>spork</code>を実行して、サーバを起動する</li>
<li>モデルの修正などを都度反映する為、テストキャッシュを無効化

<ul>
<li><code>config/environments/test.rb</code>の<code>config.cache_classes = true</code>を<code>false</code>に修正</li>
</ul>
</li>
<li><code>.rspec</code>に<code>--drb</code>実行オプションを追加</li>
<li>普通に<code>rspec spec/**/*.rb</code>を実行する　　</li>
</ol>


<p>以上</p>
]]></content>
  </entry>
  
</feed>
