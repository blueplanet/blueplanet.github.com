<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Category: Heroku | Welcome to my Blog]]></title>
  <link href="http://blueplanet.github.com/blog/categories/heroku/atom.xml" rel="self"/>
  <link href="http://blueplanet.github.com/"/>
  <updated>2012-09-21T23:45:28+09:00</updated>
  <id>http://blueplanet.github.com/</id>
  <author>
    <name><![CDATA[blueplanet]]></name>
    
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[HerokuでのCronについて調べてみた]]></title>
    <link href="http://blueplanet.github.com/blog/2012/05/14/heroku-cron/"/>
    <updated>2012-05-14T00:00:00+09:00</updated>
    <id>http://blueplanet.github.com/blog/2012/05/14/heroku-cron</id>
    <content type="html"><![CDATA[<p>Herokuの場合は、無料のCronは１日１回しか使えないイメージがある。現状はどうなっているかを調べてみた</p>

<h2>現状</h2>

<ul>
<li>Cronは既に古い</li>
<li><p>Heroku SchedulerはCronの代替案としてのものらしく、時間毎・１０分間隔でタスクを実行できる。</p>

<ul>
<li><a href="">http://blogjp.sforce.com/2011/11/heroku-schedule-dc69.html</a></li>
</ul>
</li>
<li><p>clockworkは秒単位まで指定できる</p>

<ul>
<li><a href="">http://d.hatena.ne.jp/marutanm/20110719/p1</a></li>
</ul>
</li>
</ul>


<h2>料金</h2>

<ul>
<li>Heroku Schedulerは、プロセスが起動され、実行中はDynoの時間が計上される。例え、10:00起動され、10:06まで実行完了の場合は、Dynoの時間は0.1となるイメージ。

<ul>
<li>最初は料金の計上を理解出来てなくて、<code>one-off admin process</code>で調べてみたら、下記の記事のお陰で、理解出来ました

<ul>
<li><a href="">http://d.hatena.ne.jp/koshigoeb/20111112/1321070001</a></li>
</ul>
</li>
</ul>
</li>
<li>clockworkは、裏側でプロセスが動いているので、ずっとDynoの時間が計上される</li>
</ul>


<h2>使い分け</h2>

<ul>
<li><p><a href="">http://d.hatena.ne.jp/ToMmY/20111121/1321802014</a> を参考に</p>

<ul>
<li>他のアプリケーションの補佐として、軽い処理の場合は、Scheduler</li>
<li>頻繁の処理（１０分以下）、または、ガッツリしたい処理は、clockwork</li>
<li>Schedulerは毎回プロセスが再起動される為、オーバーヘッドが大きい</li>
</ul>
</li>
<li><p>自分なりの予想</p>

<ol>
<li>１つサービスでRailsアプリを運用し、DBは別にする</li>
<li>もう１つサービスでclockworkを運用し、１のDBにアクセスする</li>
</ol>
</li>
</ul>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[rails3.2 on heroku]]></title>
    <link href="http://blueplanet.github.com/blog/2012/04/02/rails3-dot-2-on-heroku/"/>
    <updated>2012-04-02T07:29:00+09:00</updated>
    <id>http://blueplanet.github.com/blog/2012/04/02/rails3-dot-2-on-heroku</id>
    <content type="html"><![CDATA[<p>Rails 3.2のアプリをHerokuにデプロイする場合、ハマったことをメモ</p>

<h2>環境</h2>

<ul>
<li>Rails 3.2.2</li>
<li>ローカルDBはsqlite</li>
</ul>


<h2>手順</h2>

<ul>
<li>Railsアプリを作成

<ul>
<li><code>rails new myblog</code></li>
<li><code>cd myblog</code></li>
<li><code>git init</code></li>
<li><code>git add .</code></li>
<li><code>git ci -m 'init'</code></li>
</ul>
</li>
<li>Scaffold

<ul>
<li><code>rails g scaffold post title:string body:text</code></li>
<li><code>rake db:migrate</code></li>
<li><code>rm public/index.html</code></li>
<li><code>vi config/route.rb</code>

<ul>
<li><code>root :to =&gt; "pots#index"</code>を追加</li>
</ul>
</li>
<li><code>git rm public/index.html</code></li>
<li><code>git add .</code></li>
<li><code>git commit -m 'scaffold'</code></li>
</ul>
</li>
<li>Heroku

<ul>
<li><code>vi Gemfile</code>heroku側は下記を追加</li>
</ul>
</li>
</ul>


<p><div class="highlight"><pre><code class="ruby"><span class="n">group</span> <span class="ss">:production</span> <span class="k">do</span><span class="o">&lt;</span><span class="sr">/p&gt;</span>

<span class="sr">&lt;pre&gt;&lt;code&gt; gem &#39;pg&#39;  </span>
<span class="sr">&lt;/</span><span class="n">code</span><span class="o">&gt;&lt;</span><span class="sr">/pre&gt;</span>

<span class="sr">&lt;p&gt;end</span>
</code></pre>
</div>
</p>

<ul>
<li><code>rake assets:precompile RAILS_ENV=production</code></li>
<li><code>git add .</code></li>
<li><code>git commit -m 'heroku'</code></li>
<li><code>heroku create</code></li>
<li><code>git push heroku master</code></li>
<li><code>heroku rake db:migrate</code></li>
<li><code>heroku open</code>で確認できるはず</li>
</ul>


<h2>問題</h2>

<ul>
<li><code>heroku rake db:migrate</code>のエラー

<ul>
<li><code>(pg is not part of the bundle. Add it to Gemfile.)</code></li>
<li>対策：Gemfileに下記を追加</li>
</ul>
</li>
</ul>


<p><div class="highlight"><pre><code class="ruby"><span class="n">group</span> <span class="ss">:production</span> <span class="k">do</span><span class="o">&lt;</span><span class="n">br</span><span class="o">/&gt;</span>
  <span class="n">gem</span> <span class="s1">&#39;pg&#39;</span><span class="o">&lt;</span><span class="n">br</span><span class="o">/&gt;</span>
<span class="k">end</span>
</code></pre>
</div>
</p>

<ul>
<li><code>git push heroku master</code>後、画面で確認すると、エラー画面になってる

<ul>
<li><code>heroku logs</code>で確認すると<code>ActionView::Template::Error (application.css isn't precompiled)</code>エラー</li>
<li>対策：<code>push</code>前に、<code>rake assets:precompile RAILS_ENV=production</code>を実施する</li>
</ul>
</li>
</ul>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[BPStudy#55 ]]></title>
    <link href="http://blueplanet.github.com/blog/2012/03/30/bpstudy-number-55/"/>
    <updated>2012-03-30T18:50:00+09:00</updated>
    <id>http://blueplanet.github.com/blog/2012/03/30/bpstudy-number-55</id>
    <content type="html"><![CDATA[<p>今日ここの勉強会に行きました。適当なメモ<br/>
<a href="http://connpass.com/event/354/">BPStudy#55 Herokuに関するお話</a></p>

<h2>Python本の説明</h2>

<ul>
<li>プログラミングの話ではない</li>
<li>開発環境構築</li>
<li>チーム開発

<ul>
<li>ドキュメント管理Sphinx</li>
<li>課題管理</li>
<li>モジュール分散方法</li>
<li>CIツール</li>
<li>複数サーバのデプロイツール</li>
</ul>
</li>
<li>本番環境

<ul>
<li>Google AppEnige</li>
</ul>
</li>
</ul>


<h2>Heroku</h2>

<ul>
<li>ホスティングサーバとの違い

<ul>
<li>OSなどには全く意識しないで製品に集中する</li>
<li>生産性が高いプログラマが生産性をもっと高める為のプラットフォーム</li>
<li>Rubyとはある程度似ってる</li>
</ul>
</li>
<li>Salesforce？

<ul>
<li>顧客管理システムを売る会社</li>
<li>では、なんでHerokuを買った？</li>
</ul>
</li>
</ul>


<h3>日本のHerokuは？</h3>

<ul>
<li>Herokuを使いましょう！</li>
<li>Facebookアプリを作りましょう！</li>
<li>Herokuのアドオンを作りましょう！</li>
</ul>


<h2>SonicGardenでのherokuの実践活用</h2>

<ul>
<li>会社

<ul>
<li>SKIP 社内NSS</li>
<li>youRoom</li>
<li>Ruby x Cloud x Ajile</li>
<li>納品しない　受託開発</li>
</ul>
</li>
<li>自社の運用方法

<ul>
<li><a href="http://kuranuki.sonicgarden.jp/2012/03/post-70.html">高速で無駄のないソフトウェア開発を実現するための7つのポイント</a>

<ul>
<li><a href="http://www.pivotaltracker.com/">トラッカツール　pivotaltracker</a>　<strong>特徴：優先度ない、上からやれ！</strong></li>
<li>ドキュメントはほとんど作らない　<strong>ホワイトボードで十分</strong></li>
<li>githubのソースコードレビューが素晴らしい</li>
</ul>
</li>
<li>新規サービスのスタートアップはHerokuを使ってる</li>
<li>ステージング環境としてHerokuを使う</li>
</ul>
</li>
<li>Herokuでの課題と工夫

<ul>
<li>ログを数年保管したい　<strong>loggly addon</strong></li>
<li>復旧できないとき

<ul>
<li>PG Backups addonを利用</li>
<li>DBをHerokuの外にバックアップ</li>
<li>heroku_backup_taskを拡張</li>
</ul>
</li>
</ul>
</li>
<li>おすすめ資料

<ul>
<li><a href="http://gihyo.jp/dev/serial/01/heroku">Herokuで作るFacebookアプリ</a></li>
<li>etc…</li>
</ul>
</li>
</ul>


<h2>デモ</h2>

<p>ワンクリックでFacebookアプリ On Heroku のデモでした</p>
]]></content>
  </entry>
  
</feed>
